### Runloop的原理
[iOS基础面试题之RunLoop篇](http://blog.csdn.net/qq_30513483/article/details/53373905)

RunLoop的实质是一个死循环，用于保证程序的持续运行，保持程序的持续运行

###  oc有没有多继承，如何实现多继承

假设C类要同时继承A类和B类 .

1. C类在头文件导入A类和B类的头文件 .
2. 在A类和B类把需要被C类继承的方法和属性声明成一份协议 .
3. C类遵守A类和B类的协议 .
4. 在实现文件中实现协议方法 , 协议属性也要实现 . ( 问题是你无法调用到A类和B类原生的方法 )

### iOS如何进行内存管理

ARC 下：Xcode 自动通过 release、autorelease 管理。

### 讲讲runtime

目前的理解：RunTime 是一种系统运行时的机制，OC 在编译阶段并不能决定真正调用哪个函数，只有在运行时才会根据函数名称找到对应的函数调用。

### UIView 和 CALayer的区别

1. UIView 是 uikit（只能 iOS 使用） 的，CALayer 是 QuartzCore 的（iOS 和 MAC OS 通用）。
2. UIView 可以处理事件，CALayer 不能。
3. CALayer 多了一个锚点（anchorPoint）属性。
真正的绘图是由 CALayer 来管理的，UIView 管理 CALayer。

### runtime如何实现weak变量的自动置nil

runtime 对注册的类， 会进行布局，对于 weak 对象会放入一个 hash 表中。 用 weak 指向的对象内存地址作为 key，当此对象的引用计数为0的时候会 dealloc，假如 weak 指向的对象内存地址是a，那么就会以a为键， 在这个 weak 表中搜索，找到所有以a为键的 weak 对象，从而设置为 nil

### AFNetworking的内部实现原理

使用NSOperation+NSURLConnection并发模型都会面临NSURLConnection下载完成前线程退出导致NSOperation对象接收不到回调的问题。AFNetWorking解决这个问题的方法是按照官方的guide上写的NSURLConnection的delegate方法需要在connection发起的线程runloop中调用，于是AFNetWorking直接借鉴了Apple自己的一个Demo的实现方法单独起一个global thread，内置一个runloop，所有的connection都由这个runloop发起，回调也是它接收，不占用主线程，也不耗CPU资源。

### NSTimer只能在主线程上运行吗？

每一个线程都有它自己的runloop，程序的主线程会自动的使runloop生效，但对于我们自己新建的线程，它的runloop是不会自己运行起来，当我们需要使用它的runloop时，就得自己启动。

	NSTimer *time = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timerr) userInfo:nil repeats:YES];
	//self.timer = time;
	[[NSRunLoop  currentRunLoop] addTimer:time forMode:NSRunLoopCommonModes];
	[[NSRunLoop currentRunLoop] run];

### loadView和viewDidLoad的区别

1. loadView：负责创建UIViewController的view，每次访问UIViewController的view时，且view为nil，loadView方法就会被调用

2. viewDidLoad ：view创建完毕后，最终都会调用viewDidLoad方法

### id和NSObject

1. NSObject包含了一些其他的方法，需要实现NSObject协议，可以用NSObject来表示id，但是不能用id来表示NSObject

2. id关键字在编译的时候不会被检查，而NSObject在编译的时候被被检查是否含有一些错误的方法

### id和instancetype区别

1. id在编译的时候不能判断对象的真实类型，instancetype在编译的时候可以判断对象的真实类型
2. id可以用来定义变量, 可以作为返回值, 可以作为形参,instancetype只能用于作为返回值

### GCD取消任务

1. GCD原生并不支持取消操作。 dispatch_suspend函数也只能暂停开启新的未执行的block，已经处于执行中的block是无法暂停的。

2. 只要加一个外边变量，用于标记block是否需要取消。然后block中通过及时的检测这个外部变量的状态，当发现需要取消时，停止block中的后续操作，释放资源。就能达到及时取消block的目的

### 如何判断一个view 是否在另外一个view 范围内

	  CGRectIntersection(<#CGRect r1#>, <#CGRect r2#>)

### 数组和链表的区别

1. 数组是将元素在内存中连续存放，由于每个元素占用内存相同，可以通过下标迅速访问数组中任何元素。但是如果要在数组中增加一个元素，需要移动大量元素，在内存中空出一个元素的空间，然后将要增加的元素放在其中。同样的道理，如果想删除一个元素，同样需要移动大量元素去填掉被移动的元素。如果应用需要快速访问数据，很少或不插入和删除元素，就应该用数组。

2. 链表恰好相反，链表中的元素在内存中不是顺序存储的，而是通过存在元素中的指针联系到一起。比如：上一个元素有个指针指到下一个元素，以此类推，直到最后一个元素。如果要访问链表中一个元素，需要从第一个元素开始，一直找到需要的元素位置。但是增加和删除一个元素对于链表数据结构就非常简单了，只要修改元素中的指针就可以了。如果应用需要经常插入和删除元素你就需要用链表数据结构了。

### UICollectionView自定义layout如何实现

	prepareLayout
	
	/**
	 *  控制最后srollview的最后去哪里 用来设置collectionView停止滚动	那一刻的位置
 	*/
	- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity
	
	/**
	 *  返回yes，只要显示的边界发生改变，就需要重新布局：(会自动调用	layoutAttributesForElementsInRect方法，获得所有cell的布局属性)
	 */
	- (BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds {

### objc使用什么机制管理对象内存？

使用内存管理计数器，来管理内存的。当内存管理计数器为0的时候，对象就会被释放。

### 什么时候会报unrecognized selector错误？iOS有哪些机制来避免走到这一步？

1. 当发送消息的时候，我们会根据类里面的methodLists列表去查询我们要动用的SEL,当查询不到的时候，我们会一直沿着父类查询，当最终查询不到的时候我们会报unrecognized selector错误

2. 当系统查询不到方法的时候，会调用+(BOOL)resolveInstanceMethod:(SEL)sel动态解释的方法来给我一次机会来添加，调用不到的方法。或者我们可以再次使用-(id)forwardingTargetForSelector:(SEL)aSelector重定向的方法来告诉系统，该调用什么方法，一来保证不会崩溃。

### 给类添加一个属性后，在类结构体里哪些元素会发生变化？

	instance_size ：实例的内存大小
	objc_ivar_list *ivars:属性列表

### 苹果是如何实现Autorelease Pool的？

Autorelease Pool作用：缓存池，可以避免我们经常写relase的一种方式。其实就是延迟release，将创建的对象，添加到最近的autoreleasePool中，等到autoreleasePool作用域结束的时候，会将里面所有的对象的引用计数器-1.
autorelease

### isa指针？（对象的isa，类对象的isa，元类的isa都要说）

在oc中，类也是对象，所属元类。所以经常说:万物皆对象
对象的isa指针指向所属的类
类的isa指针指向了所属的元类
元类的isa指向了根元类，根元类指向了自己。

### AFN为什么添加一条常驻线程

AFN 目的：就是开辟线程请求网络数据。如果没有常住线程的话，就会每次请求网络就去开辟线程，完成之后销毁开辟线程，这样就造成资源的浪费，开辟一条常住线程，就可以避免这种浪费，我们可以在每次的网络请求都添加到这条线程。

### KVC的使用

1. setValue: forKey: 只查找本类里面的属性
2. setValue: forKeyPath：会查找本类里面属性，没有会继续查找父类里面属性。

forKeyPath包含了forKey的功能,以后使用forKeyPath就可以了。
forKeyPath可以利用‘ . ’运算符一层一层往下查找对象的属性

### 
### 
### 
### 
### 
### 
### ### 
### 
### 
### 
### 
### 
### 
### 
### 
### ### 
### 
### 
### 
### 
### 
### 
### 
### 
### ### 
### 
### 
### 
### 
### 
### 
### 
### 
### ### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 


# 未解答
---
### 讲讲红黑树
### 数组和链表有哪些区别，插入，删除效率分别怎么样


### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 
### 






































































